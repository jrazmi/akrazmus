{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./db/knex.js","webpack:///./knexfile.js","webpack:///./src/context.js","webpack:///./src/index.js","webpack:///./src/loaders/index.js","webpack:///./src/middleware/auth/index.js","webpack:///./src/middleware/auth/rules/hasGlobalPerm.js","webpack:///./src/middleware/auth/rules/index.js","webpack:///./src/middleware/auth/rules/isAuthenticated.js","webpack:///./src/models/account/index.js","webpack:///./src/models/account/resolvers/me.js","webpack:///./src/models/account/resolvers/register.js","webpack:///./src/models/account/resolvers/requestLogin.js","webpack:///./src/models/account/resolvers/requestPasswordReset.js","webpack:///./src/models/account/resolvers/resetPassword.js","webpack:///./src/models/account/resolvers/updateMe.js","webpack:///./src/models/users/index.js","webpack:///./src/models/users/resolvers/globalPermissions.js","webpack:///./src/models/users/resolvers/user.js","webpack:///./src/models/users/resolvers/users.js","webpack:///./src/resolvers/index.js","webpack:///./src/types/index.js","webpack:///./src/util/FilterQuery.js","webpack:///./src/util/FormatEmail.js","webpack:///./src/util/Prove.js","webpack:///./src/util/aws/index.js","webpack:///./src/util/index.js","webpack:///./src/util/templates/EmailRPR.js","webpack:///external \"aws-sdk\"","webpack:///external \"bcryptjs\"","webpack:///external \"dataloader\"","webpack:///external \"dotenv\"","webpack:///external \"express-jwt\"","webpack:///external \"graphql-shield\"","webpack:///external \"graphql-yoga\"","webpack:///external \"jsonwebtoken\"","webpack:///external \"knex\"","webpack:///external \"lodash\"","webpack:///external \"merge-graphql-schemas\"","webpack:///external \"path\""],"names":["environment","process","config","require","module","exports","test","client","connection","env","TEST_DATABASE_URL","migrations","tableName","directory","seeds","development","debug","DATABASE_URL","production","PRODUCTION_DATABASE_URL","req","res","db","currentUser","loaders","user","id","SingleLoader","email","permissions","global","userId","ManyLoader","where","first","sendEmail","server","GraphQLServer","typeDefs","resolvers","context","request","response","middlewares","AuthMiddleware","express","use","jwt","secret","TOKEN_SECRET","credentialsRequired","getToken","fromHeaderOrQuerystring","headers","authorization","split","query","token","options","endpoint","subscriptions","playground","port","PORT","cors","credentials","origin","FRONTEND_HOST","formatError","err","message","start","console","log","table","key","DataLoader","keys","whereIn","select","then","rows","map","ikey","find","x","filter","shield","Query","AccountQuery","Mutation","AccountMutation","fallbackError","allowExternalErrors","hasGlobalPerm","perm","rule","cache","root","args","ctx","info","deleted","perms","load","_","includes","isAuthenticated","parent","me","ShieldQuery","requestLogin","register","requestPasswordReset","resetPassword","updateMe","ShieldMutation","formattedEmail","FormatEmail","input","existing","code","success","nextPage","userData","Object","assign","password","bcrypt","hash","insert","return","credAuthError","valid","compare","jsonwebtoken","sign","expiresIn","resetToken","templateParams","link","emailParams","Destination","ToAddresses","Message","Body","Text","Charset","Data","EmailRPR","Html","Subject","Source","FROM_EMAIL","send","e","validJWT","verify","updatedPassword","updatedUser","update","returning","prove","users","User","globalPermissions","u","parseInt","FilterQuery","items","run","hasMore","totalCount","UserQuery","typesArray","fileLoader","path","__dirname","typesMerged","mergeTypes","constructor","prepped","prep","build","toString","clause","isNested","expressions","y","Array","isArray","v","k","push","class","column","operation","value","connector","operations","subOp","d","builder","thisBuilder","statement","generate","orWhere","innerBuilder","andWhere","whereNotIn","whereNot","limit","sort","offset","trim","toUpperCase","promise","data","catch","AWS","accessKeyId","AWS_ACCESS_KEY","secretAccessKey","AWS_SECRET_KEY","region","ses","SES","apiVersion","params","type","content","first_name","first_names"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","const environment = process.env.NODE_ENV\nconst config = require('../knexfile.js')[environment];\nmodule.exports = require('knex')(config);","require(\"dotenv\").config();\n\nmodule.exports = {\n  test: {\n    client: 'pg',\n    connection: process.env.TEST_DATABASE_URL,\n    migrations: {\n      tableName: \"knex_migrations\",\n      directory: `./db/migrations`\n    },\n    seeds: {\n      directory: './db/seeds/test'\n    }\n  },\n  development: {\n    debug: false,\n    client: \"pg\",\n    connection: process.env.DATABASE_URL,\n    migrations: {\n      tableName: \"knex_migrations\",\n      directory: `./db/migrations`\n    }\n  },\n  production: {\n    client: \"pg\",\n    connection: process.env.PRODUCTION_DATABASE_URL,\n    migrations: {\n      tableName: \"knex_migrations\",\n      directory: `./db/migrations`\n    }\n  }\n};","import { SingleLoader, ManyLoader } from './loaders';\nimport { sendEmail } from '../src/util/aws';\n\nexport default async (req, res, db) => {\n    let currentUser;\n    // initialize dataloaders to context\n    const loaders = {\n        user: {\n            id: SingleLoader(db, 'users', 'id'),\n            email: SingleLoader(db, 'users', 'email')\n        },\n        permissions: {\n            global: {\n                userId: ManyLoader(db, 'global_permissions', 'user_id'),\n            }\n        }\n    }\n\n    // load currentuser into context\n    // do we want to actually load user or no?\n    // console.log(req)\n    if(req && req.user) {\n        currentUser = await db('users').where({id:req.user.id}).first();\n    }\n\n    return {\n        req,\n        res,\n        currentUser: currentUser,\n        db,\n        loaders: loaders,\n        sendEmail: sendEmail\n    }\n};","import { GraphQLServer } from \"graphql-yoga\";\nimport jwt from 'express-jwt';\nimport resolvers from \"./resolvers\";\nimport typeDefs from \"./types\";\nimport context from './context';\nimport { AuthMiddleware } from './middleware/auth';\nconst db = require('../db/knex.js');\n\nrequire(\"dotenv\").config();\n\nconst server = new GraphQLServer({\n    typeDefs,\n    resolvers,\n    context: ({request, response}) => context(request,response, db),\n    middlewares:[\n      AuthMiddleware\n    ]\n});\n\nserver.express.use(jwt({\n    secret: process.env.TOKEN_SECRET,\n    credentialsRequired: false,\n    //allow for auth header or token query param\n    getToken: function fromHeaderOrQuerystring (req) {\n      if (req.headers.authorization && req.headers.authorization.split(' ')[0] === 'Bearer') {\n        return req.headers.authorization.split(' ')[1];\n      } else if (req.query && req.query.token) {\n        return req.query.token;\n      }\n      return null;\n    }\n  }));\n\n\nconst options = {\n  endpoint: \"/graphql\",\n  subscriptions: \"/subscriptions\",\n  playground: \"/playground\",\n  port: process.env.PORT || 4000,\n  cors: {\n    credentials: true,\n    origin: process.env.NODE_ENV === 'test' ? '*' : process.env.FRONTEND_HOST\n  },\n  formatError: err => {\n    return {message: err.message}\n  }\n}\n\n\nserver.start(options, ({port}) => {\n  console.log(`Server started, listening on port ${port} for incoming requests.`);\n});\n","import DataLoader from 'dataloader';\n\nexport const SingleLoader = (db, table, key) => new DataLoader(\n    (keys) => {\n        return(\n            db.table(table)\n            .whereIn(key, keys).select()\n            .then(rows => {\n                return(\n                    keys.map(ikey=>{\n                        return(\n                            rows.find(x=>x[key] === ikey)\n                        )\n                    }\n                    )\n                )\n            })\n        )\n    }\n)\n\nexport const ManyLoader = (db, table, key) => new DataLoader(\n    (keys) => {\n        return(\n            db.table(table)\n            .whereIn(key, keys).select()\n            .then(rows => {\n                return(\n                    keys.map(ikey=>{\n                        return(\n                            rows.filter(x=>x[key] === ikey)\n                        )\n                    }\n                    )\n                )\n            })\n        )\n    }\n)","import { shield } from 'graphql-shield';\n\nimport { ShieldQuery as AccountQuery, ShieldMutation as AccountMutation } from '../../models/account';\n\n\nexport const AuthMiddleware = shield({\n        Query:{\n            ...AccountQuery\n        },\n        Mutation:{\n            ...AccountMutation\n        }, \n    },\n    {\n        fallbackError: \"Not Authorized\",\n        debug: process.env.NODE_ENV !== \"production\",\n        allowExternalErrors: true\n    }\n);","import { rule } from 'graphql-shield';\nimport _ from \"lodash\";\n\nexport const hasGlobalPerm = (perm) => rule({cache: \"contextual\"})(async(root,args,ctx,info) => {\n    if(!ctx.currentUser) return false;\n    if(ctx.currentUser.deleted) return false;\n    const perms = await ctx.loaders.permissions.global.userId.load(ctx.currentUser.id);\n    // iterate over permissions map permission values to an array\n    // return true/false if permission exists\n    return _.includes(_.map(perms, 'permission'), perm);\n})","export { isAuthenticated } from './isAuthenticated';\nexport { hasGlobalPerm } from './hasGlobalPerm';","import { rule } from 'graphql-shield';\n\nexport const isAuthenticated = rule({cache: \"contextual\"})(async(parent, args, ctx) => {\n    if(!ctx.currentUser) return false;\n    if(ctx.currentUser.deleted) return false;\n    return true\n})","import { me } from './resolvers/me';\nimport { requestLogin } from './resolvers/requestLogin';\nimport { register } from './resolvers/register';\nimport { requestPasswordReset } from './resolvers/requestPasswordReset';\nimport { resetPassword } from './resolvers/resetPassword';\nimport { updateMe } from './resolvers/updateMe';\nimport { isAuthenticated } from '../../middleware/auth/rules';\n\nexport const Query = {\n    me\n}\n\nexport const ShieldQuery = {\n    me: isAuthenticated\n}\n\n\nexport const Mutation = {\n    requestLogin,\n    register,\n    requestPasswordReset,\n    resetPassword,\n    updateMe,\n}\n\nexport const ShieldMutation = {\n    updateMe: isAuthenticated\n}","export const me = async(root,args,ctx,info) => {\n    return ctx.currentUser\n}","import { FormatEmail } from '../../../util';\nimport bcrypt from 'bcryptjs';\n\nexport const register = async(root,args,ctx,info) => {\n    // Load user from formatted email\n    const formattedEmail = FormatEmail(args.input.email);\n    const existing = await ctx.loaders.user.email.load(formattedEmail);\n    if(existing){\n        return(\n            {\n                code: \"DUPLICATE\",\n                success: false,\n                message: \"Go Log In!\",\n                nextPage: \"/login\"\n            }\n        )\n    }\n\n    const userData = Object.assign({}, args.input, {\n        password: await bcrypt.hash(args.input.password, 10),\n        email: formattedEmail,\n    });\n\n    const user = await ctx.db('users').insert(userData).return('*');\n    \n    return(\n        {\n            code: \"OK\",\n            success: true,\n            message: \"Go Log In!\",\n            nextPage: \"/login\"\n        }\n    )\n\n}","import jsonwebtoken from 'jsonwebtoken';\nimport bcrypt from 'bcryptjs';\nimport { FormatEmail } from '../../../util';\n\nexport const requestLogin = async(root,args,ctx,info) => {\n    // Load user from formatted email\n    const user = await ctx.loaders.user.email.load(FormatEmail(args.email));\n\n    //set Generic Invalid Credential error\n    const credAuthError = { code: \"DOES_NOT_EXIST\", success: false, message: \"Could not find matching user with these credentials\"};\n\n    // if no user exists return GIC\n    if(!user){\n        return credAuthError\n    }\n\n    // compare password and return GIC if mismatch\n    const valid = await bcrypt.compare(args.password, user.password);\n    if(!valid){\n        return credAuthError\n    }\n\n    //if user has been deleted/suspended return susspension error\n    if(user.deleted){\n        return { code: \"REVOKED\", success: false, message: \"Access for this user account has been revoked.\"}\n    }\n\n    // set token for user\n    const token = jsonwebtoken.sign({ id: user.id, email: user.email }, process.env.TOKEN_SECRET, {\n        expiresIn: '30d'\n    })\n    \n    \n\n    return {\n        code: \"OK\",\n        success: true,\n        message: \"Login Successful\",\n        token: token,\n    }\n};\n","import { FormatEmail } from '../../../util';\nimport { EmailRPR } from '../../../util/templates/EmailRPR';\nimport jsonwebtoken from 'jsonwebtoken';\n\nexport const requestPasswordReset = async ( root, args, ctx, info ) => {\n    // Load user from formatted email\n    const formattedEmail = FormatEmail(args.email);\n    const user = await ctx.loaders.user.email.load(formattedEmail);\n\n    //set Generic Invalid Credential error\n    const credAuthError = { code: \"DOES_NOT_EXIST\", success: false, message: \"Could not find matching user with these credentials\"};\n\n    //if not user return GIC\n    if(!user){\n        return credAuthError\n    }\n    const resetToken = jsonwebtoken.sign({ id: user.id, email: user.email }, process.env.TOKEN_SECRET, {\n        expiresIn: '1h'\n    });\n\n    const templateParams = {\n        link: `${args.link}?token=${resetToken}`,\n        user: user\n    }\n\n    // construct email parameters\n    const emailParams = {\n        Destination: {\n            ToAddresses: [user.email]\n          },\n          Message: {\n            Body: {\n              Text: {\n                Charset: \"UTF-8\",\n                Data: EmailRPR(\"text\", templateParams)\n              },\n              Html: {\n                Charset: \"UTF-8\",\n                Data: EmailRPR(\"html\", templateParams)\n              }\n            },\n            Subject: {\n              Charset: \"UTF-8\",\n              Data: \"Request Password Reset\"\n            }\n          },\n          Source: process.env.FROM_EMAIL\n    }\n    // try to send it otherwise you know... error.\n    try {\n      const send = await ctx.sendEmail(emailParams);\n      return{\n        code: \"OK\",\n        success: true,\n        message: \"Check your email for a reset link\"\n      }\n    } catch (e) {\n      console.log(e)\n      return {\n        code: \"INPUT_ERROR\",\n        success: false,\n        message: \"Email could not be sent\"\n      }\n    }\n}","import jsonwebtoken from 'jsonwebtoken';\nimport { FormatEmail } from '../../../util';\nimport bcrypt from 'bcryptjs';\n\nexport const resetPassword = async ( root, args, ctx, info ) => {\n    let validJWT;\n    //verify that a valid jwt was passed in\n    try {\n        validJWT = await jsonwebtoken.verify(args.token, process.env.TOKEN_SECRET);\n    } catch(e){\n        return({\n            code: \"EXPIRED\",\n            success: false,\n            message: \"This token is either invalid or expired\"\n        })\n    }\n\n    // get user from jwt args\n    const user = await ctx.loaders.user.email.load(FormatEmail(validJWT.email));\n    \n    //set Generic Invalid Credential error\n    const credAuthError = { code: \"DOES_NOT_EXIST\", success: false, message: \"Could not find matching user with these credentials\"};\n\n    // if no user exists return GIC\n    if(!user){\n        return credAuthError\n    }\n\n    // bcrypt new password\n    const updatedPassword = await bcrypt.hash(args.password, 10);\n\n    //update new password\n    const updatedUser = await ctx.db('users').where('id', user.id).update({password: updatedPassword}).returning('*');\n\n    return{\n        code: \"OK\",\n        success: true,\n        message: \"Password has been updated\"\n    }\n}","import { FormatEmail, prove } from '../../../util';\n\nexport const updateMe = async (root, args, ctx, info) => {\n\n    // leaving this in here in case we want to remove user query from context constructor\n    // shouldn't be returned if shield isAuthenticated middleware applied\n    if(!ctx.currentUser){\n        return{\n            code: \"EXPIRED\",\n            success: false,\n            message: \"No current user\"\n        }\n    }\n\n    const [err, update] = await prove(ctx.db('users').where({id: ctx.currentUser.id}).update(args.input));\n    if(err) {\n        return {\n            code: \"ERROR\",\n            success: false,\n            message: err.message ? err.message : 'Unknown error'\n        }\n    }\n    return {\n        code: \"OK\",\n        success: true,\n        message: \"Profile updated\"\n    }\n}","import { globalPermissions } from './resolvers/globalPermissions';\nimport { user } from './resolvers/user';\nimport { users } from './resolvers/users';\n\nexport const Query = {\n    user,\n    users,\n}\n\n\nexport const User = {\n    globalPermissions\n}\n\n","import _ from 'lodash';\n\nexport const globalPermissions = async (root,args,ctx,info) => {\n    //load all global permissions for root user id\n    const perms = await ctx.loaders.permissions.global.userId.load(root.id);\n\n    // map result to an array of perm values\n    return _.map(perms, 'permission');\n}","import { FormatEmail } from '../../../util';\n\nexport const user = async(root,args,ctx,info) => {\n    let u;\n    if(args.id){\n        u = await ctx.loaders.user.id.load(parseInt(args.id));\n    } else if (args.email){\n        u = await ctx.loaders.user.email.load(FormatEmail(args.email));\n    } \n    return u\n}","import { FilterQuery } from \"../../../util\";\n\n\nexport const users = async (root, args, ctx, info) => {\n    let query = new FilterQuery(ctx.db, 'users', args.input);\n\n    const items = await query.run()\n    return {\n        hasMore: false,\n        totalCount: 0,\n        items: items\n    }\n}","import { Query as AccountQuery, Mutation as AccountMutation } from '../models/account';\nimport { User, Query as UserQuery } from '../models/users';\n\nexport default {\n    Query:{\n        ...AccountQuery,\n        ...UserQuery\n\n    },\n    Mutation: {\n        ...AccountMutation\n    },\n    User: User,\n}\n","import * as path from \"path\";\nimport { fileLoader, mergeTypes } from \"merge-graphql-schemas\";\n\nconst typesArray = fileLoader(path.join(__dirname, \"../**/*.graphql\"));\nconst typesMerged = mergeTypes(typesArray);\n\nexport default typesMerged;","import _ from 'lodash';\n\n/* \nFilter construction based on Jake Lowen's\nhttps://github.com/jakelowen/sqorn-graphql-filters/blob/master/lib/applyFilters.js\n\n*/\n\n/*\n\nDEEEPLY NESTED IS NOT WORKING\nTHAT SECOND OR ISN't working.\nAND:[\n    OR:{..., {OR: {...}}}\n]\n\n\n*/\nexport class FilterQuery {\n    constructor(db, table, input){\n        this.db = db;\n        this.query = this.db(table);\n        this.where = input && input.where ? input.where : null;\n        this.limit = input && input.limit ? input.limit : null;\n        this.sort = input && input.sort ? input.sort : null;\n        this.offset = input && input.offset ? input.offset : null;\n    }\n\n    // construct the query\n    run = async () =>{\n        if(this.where){\n            const prepped = this.prep(this.where);\n            // this.query = this.query.where((builder)=>{\n            //     return this.build(builder, prepped);\n            // }\n            // )\n            this.query = this.build(this.query, prepped);\n\n        }\n        console.log(this.query.toString())\n        return []\n        return await this.query.select('*')\n    }\n\n\n    // map out all of the filter clauses\n    prep = (clause, parent=null, isNested = false) => {\n\n        //map out conditions for query\n        let expressions = [];\n        _.map(clause, (x,y) => {\n            // console.log(y)\n            // console.log(x);\n            /*\n            if this clause is not an array and its not nested construct the expression\n            \n            EXAMPLE QUERY:\n            where: {\n                deleted: { eq: false}\n            }\n\n            EXPECTED expressions:\n            [ { class: 'EXPRESSION',\n                column: 'deleted',\n                operation: 'eq',\n                value: false } \n            ]\n            */\n\n            if(!Array.isArray(x) && !parent && !isNested){\n                _.map(x, (v, k) => {\n                    expressions.push({\n                        class: \"EXPRESSION\",\n                        column: y,\n                        operation: k,\n                        value: v,\n                    })\n                })\n            } \n            \n            /*\n            AND/OR clauses should construct a parent expression and recursivly call prep function on nested subclauses\n            \n            EXAMPLE QUERY (AND SINGULAR):\n            input: {\n                    where: {\n                        AND: {id: {eq: \"1\"}\n                    }\n                }\n            EXPECTED expressions(AND SINGULAR): \n            [ { class: 'PARENT',\n                connector: 'AND',\n                operations:\n                [ { class: 'EXPRESSION', column: 'id', operation: 'eq', value: '1' } ] } ]\n            \n            EXAMPE QUERY (OR ARRAY):\n              where: {\n                OR: [\n                    {deleted:{eq: false}}\n                    {id:{eq: \"1\"}}\n                    ]\n                }\n            EXPECTED expressions (ARRAY):\n                [ { class: 'PARENT',\n                    connector: 'OR',\n                    operations:\n                    [ { class: 'EXPRESSION',\n                        column: 'deleted',\n                        operation: 'eq',\n                        value: false },\n                    { class: 'EXPRESSION', column: 'id', operation: 'eq', value: '1' } ] } ]\n\n            */\n            \n            else if ( y === 'AND'){\n                expressions.push({\n                    class: \"PARENT\",\n                    connector: \"AND\",\n                    operations: this.prep(x, \"AND\", true),\n                    parent: parent,\n                })\n            } \n            else if ( y === \"OR\"){\n                expressions.push({\n                    class: \"PARENT\",\n                    connector: \"OR\",\n                    operations: this.prep(x, \"OR\", true),\n                    parent: parent\n                })\n            } else \n            \n            /* if clause is not a parent and not a root expression\n                map values and recursively call prep function until narrowed to EXPRESSIONS\n            */\n            \n            {\n                _.map(x, (v, k) => {\n                    if( k === \"AND\" || k === \"OR\") {\n                        \n                        const subOp = this.prep({ [k]: v}, k, true);\n                        expressions.push(subOp[0]);\n                    } else {\n                        _.map(v, (x, d) => {\n                            expressions.push({\n                                class: \"EXPRESSION\",\n                                column: k,\n                                operation: d,\n                                value: x,\n                                parent: parent\n                            })\n                        })\n                    }\n                })\n            }\n        \n        }) \n        return expressions;\n\n    }\n\n    // build the expression, if it is a parent rebuild subexpressions\n    build = (builder, expressions) => {\n        let thisBuilder = builder;\n        _.map(expressions, statement => {\n            \n            switch(statement.class){\n                case \"PARENT\": {\n                       \n                        if(false && statement.connector === \"OR\" && statement.parent === \"OR\"){\n                            console.log('\\n\\n')\n                            console.log(\"STATEMENT:\", JSON.stringify(statement, null, 2));\n                            console.log('\\n\\n')\n\n                            thisBuilder = builder.orWhere((builder) => {\n                                return this.build(builder, statement.operations)\n                            })\n                        } else {\n                            thisBuilder = builder.where((builder) => {\n                                return this.build(builder, statement.operations)\n                            })\n                        }\n\n                    break;\n                }\n                case \"EXPRESSION\": {\n                    return this.generate(thisBuilder, statement);\n                    break;\n                }\n                default: {\n                    break;\n                }\n            }\n        });\n        return thisBuilder;\n    }\n\n    // generate or vs and queries default to andWhere\n    // if the statement has a parent \n    generate = (builder, statement) => {\n    \n        switch(statement.parent){\n            case \"OR\": {\n                console.log(statement)\n                return builder.orWhere((innerBuilder)=> { \n                    return this.operations(innerBuilder, statement);\n                });\n                break;\n            }\n            default: {\n                return builder.andWhere((innerBuilder)=> { \n                    return this.operations(innerBuilder, statement);\n                });\n            }\n            // case \"OR\": {\n            //     return builder.orWhere(statement.column, this.operations(statement.operation), statement.value);\n            //     break;\n            // }\n            // default: {\n            //     return builder.andWhere(statement.column, this.operations(statement.operation), statement.value);\n            //     break;\n            // }\n\n        }\n    }\n\n    operations = (innerBuilder, statement) => {\n        switch(statement.operation){\n            case 'eq':{\n                return innerBuilder.where(statement.column, '=', statement.value);\n            }\n            case 'neq': {\n                return innerBuilder.where(statement.column, '!=', statement.value);\n            }\n            case 'in': {\n                return innerBuilder.whereIn(statement.column, statement.value);\n            }\n            case 'notIn': {\n                return innerBuilder.whereNotIn(statement.column, statement.value);\n            }\n            case 'lt': {\n                return innerBuilder.where(statement.column, '<', statement.value);\n            }\n            case 'lte': {\n                return innerBuilder.where(statement.column, '<=', statement.value);\n            }\n            case 'gt': {\n                return innerBuilder.where(statement.column, '>', statement.value);\n            }\n            case 'gte': {\n                return innerBuilder.where(statement.column, '>=', statement.value);\n            }\n            case 'contains': {\n                return innerBuilder.where(statement.column, 'ilike', `%${statement.value}%`);\n            }\n            case 'notContains':{\n                return innerBuilder.whereNot(statement.column, 'ilike', `%${statement.value}%`);\n            }\n            case 'startsWith': {\n                return innerBuilder.where(statement.column, 'ilike', `${statement.value}%`);\n            }\n            case 'notStartsWith': {\n                return innerBuilder.whereNot(statement.column, 'ilike', `${statement.value}%`);\n            }\n            case 'endsWith': {\n                return innerBuilder.where(statement.column, 'ilike', `%${statement.value}`);\n            }\n            case 'notEndsWith': {\n                return innerBuilder.whereNot(statement.column, 'ilike', `%${statement.value}`);\n            }\n            default:\n                break;\n        }\n   \n    }\n    // operations = (operation) => {\n    //     switch(operation){\n    //         case \"eq\": {\n    //             return '='\n    //         }\n    //         case \"neq\": {\n    //             return '!='\n    //         }\n    //         default:\n    //             break;\n    //     }\n    // }\n\n}","export const FormatEmail = (email) => {\n    return email.trim().toUpperCase()\n}","export const prove = (promise) => {\n    return promise.then(data => [null, data]).catch(err => [err])\n}","import AWS from 'aws-sdk';\n\nAWS.config.update({\n    accessKeyId: process.env.AWS_ACCESS_KEY,\n    secretAccessKey: process.env.AWS_SECRET_KEY,\n    region: 'us-east-1'\n})\n\nconst ses = new AWS.SES({apiVersion: '2010-12-01'});\n\n\n// init send function for test mocking\nexport const sendEmail = async(params) => {\n    return await ses.sendEmail(params).promise()\n};\n\n\n","export { FormatEmail } from './FormatEmail';\nexport { prove } from './Prove';\nexport { FilterQuery } from './FilterQuery';","export const EmailRPR = (type, content) => {\n\tif (type ==='text'){\n\t\treturn(\n\t\t\t`\n\t\t\t${content.user.first_name || \"friend\"}\n\t\t\tReset your password: ${content.link}\n\t\t\t`\n\t\t)\n\t}\n\n\treturn(\n\t\t`<html xmlns=\"http://www.w3.org/1999/xhtml\">\n\t\t<head>\n\t\t\t<title>Reset Password Request</title>\n\t\t\t<meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\"><meta name=\"viewport\" content=\"width=device-width\">\n\t\t\t<style type=\"text/css\">@media only screen and (max-width:600px){body[yahoo=fix] .wrapper-inner{width:100%!important;margin:0!important;padding:0!important;-webkit-text-size-adjust:none}body[yahoo=fix] img{max-width:100%;height:auto!important}body[yahoo=fix] .content{font-size:15px;padding-top:1em;padding-bottom:1em;margin:0 20px}body[yahoo=fix] .footer{width:100%!important;padding:0!important}body[yahoo=fix] .footer .unsub{width:70%!important}body[yahoo=fix] .footer .social{width:15%!important}body[yahoo=fix] .footer .social a{padding:.5em;display:block}body[yahoo=fix] .footer .social a img{display:block;margin:0 auto}body[yahoo=fix] .footer p{font-size:12px!important;line-height:1.4!important;padding-left:3%}body[yahoo=fix] .spacer{display:none}}@media only screen and (max-width:480px){table[class=footer] p{padding-left:0;text-align:center}table[class=footer] td{display:block!important}table[class=footer] .unsub{width:100%!important}table[class=footer] .gutter{display:none!important}table[class=footer] .social{width:50%!important;float:left;text-align:center}table[class=content] .half-width-button{display:none!important;height:0!important;width:0!important}}.ExternalClass{width:100%}.ExternalClass,.ExternalClass p,.ExternalClass span,.ExternalClass font,.ExternalClass td,.ExternalClass div{line-height:100%}p{margin:1em 0};\n\t\t\t</style>\n\t\t</head>\n\t\t<body style=\"min-width: 100%; margin: 0; padding: 0; font-family: sans-serif; line-height: 1.4; font-size: 15px; background: #ffffff\" yahoo=\"fix\">\n\t\t<table style=\"max-width:900px;margin:0px auto\" width=\"95%\">\n\t\t\t<tbody>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t<div style=\"max-width: 700px; width: 95%; margin: 0 auto; font-family: sans-serif; font-size: 18px; line-height: 23.8px; color: #2c2b2c;  padding: 7px 7px 7px 7px;\">\n\t\t\t\t\n\t\t\t\t\t\t<p> Hey ${content.user.first_names || \"friend\"}</p>\n\t\t\t\t\t\t<p> <a href=${content.link}> Reset your password </a></p>\n\t\t\n\t\t\t\t\t</div>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</tbody>\n\t\t</table>\n\t\t</body>\n\t\t</html>`\n\t)\n}\n","module.exports = require(\"aws-sdk\");","module.exports = require(\"bcryptjs\");","module.exports = require(\"dataloader\");","module.exports = require(\"dotenv\");","module.exports = require(\"express-jwt\");","module.exports = require(\"graphql-shield\");","module.exports = require(\"graphql-yoga\");","module.exports = require(\"jsonwebtoken\");","module.exports = require(\"knex\");","module.exports = require(\"lodash\");","module.exports = require(\"merge-graphql-schemas\");","module.exports = require(\"path\");"],"sourceRoot":""}